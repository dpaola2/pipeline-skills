# Rename "Landing Pages" to "Public Pages" — Architecture Proposal

> **Generated by:** Pipeline Stage 2 (Architecture)
> **Date:** February 6, 2026
> **PRD:** `projects/rename-landing-pages-to-public-pages/prd.md`
> **Discovery Report:** `projects/rename-landing-pages-to-public-pages/discovery-report.md`
> **Linear:** [PM-226](https://linear.app/orangeqc/issue/PM-226/question-is-it-too-late-to-rename-feature-to-public-pages)

---

## 1. Data Model Changes

### New Tables

None. This project creates no new tables.

### Modified Tables

None. No database columns, table names, or schema elements are changed. The underlying `landing_pages`, `landing_page_sections`, and `landing_page_section_forms` tables remain as-is. The `landing_pages_enabled` column on `accounts` remains as-is.

### Rails Models

No model changes. All model classes (`LandingPage`, `LandingPageSection`, `LandingPageSectionForm`) retain their current names, associations, validations, and scopes.

### Associations Map

No change to the existing association graph:

```
Account 1──* LandingPage 1──* LandingPageSection 1──* LandingPageSectionForm
                  │
                  └──* Structure (via landing_page_id FK)
```

### Migration Plan

| Migration | Type | Notes |
|-----------|------|-------|
| (none) | — | No migrations required |

### Expected Data Volumes

N/A — no data model changes.

---

## 2. API Endpoints

### New Endpoints

None. This project adds no API endpoints.

### Modified Endpoints

None. Landing pages have no API exposure. The feature is entirely admin-UI.

### Serializers / Blueprints

No changes. No blueprints or serializers exist for landing pages.

---

## 3. Backwards Compatibility

### Compatibility Matrix

| Feature / Behavior | Web (current) | iOS (current) | Android (current) |
|-------------------|:---:|:---:|:---:|
| Admin sidebar shows "Public Pages" | Full | N/A | N/A |
| All admin headings/buttons say "Public Page(s)" | Full | N/A | N/A |
| All flash messages say "Public page..." | Full | N/A | N/A |
| URL paths remain `/setup/landing_pages` | No change | N/A | N/A |
| Feature flag column remains `landing_pages_enabled` | No change | N/A | N/A |
| Public-facing QR code page (visitor view) | No change | N/A | N/A |
| API responses | No change | No change | No change |

### Old Client Behavior

**iOS / Android (all versions):** No impact. Mobile apps do not render the landing pages admin UI. No API endpoints serve the feature name. Old clients are completely unaffected.

**Web (bookmarked URLs):** URLs like `/setup/landing_pages` and `/setup/landing_pages/:id/edit` continue to work — routes are unchanged.

### API Versioning

Not applicable. No API changes.

### Data Migration

| Migration | Strategy | Rollback |
|-----------|----------|----------|
| (none) | — | — |

---

## 4. Security Design

### Query Scoping

No new data access paths. All existing queries remain unchanged:

| Resource | Scoping Chain | Status |
|----------|--------------|--------|
| LandingPage | `current_account.landing_pages` | Unchanged |
| Structure | `Structure.accessible_to(current_user)` | Unchanged |

### Authorization

No changes to authorization. All controllers continue to use `require_administer_permission` and `require_landing_pages_enabled`.

| Action | Permitted Roles | Check | Status |
|--------|----------------|-------|--------|
| View/manage public pages | Account admins | `require_administer_permission` | Unchanged |
| Feature access | Accounts with flag enabled | `require_landing_pages_enabled` | Unchanged |

### New Attack Surface

None. No new data access paths, no new endpoints, no new controllers.

---

## 5. Export Impact

| Export | Format | Changes | Backwards Compatible? |
|-------|--------|---------|----------------------|
| (none) | — | No exports reference the feature name | N/A |

---

## 6. Implementation Approach

Since this project has no data model, API, or migration work, the architecture is entirely about the string replacement strategy. The discovery report (Section 6) provides the complete inventory of ~51 occurrences across ~15 files.

### Strategy: Direct String Replacement

Replace user-facing strings in place. No indirection layer (i.e., no I18n/locale files, no constants — just change the literal strings).

**Rationale:** The codebase uses hardcoded English strings for all admin UI text today. Introducing I18n for this one rename would be inconsistent with the rest of the codebase and is explicitly out of scope. The follow-up project (`public-pages-codebase-rename`) may revisit this.

### Files to Modify

**Controllers (2 files):**
| File | Changes |
|------|---------|
| `app/controllers/setup/landing_pages_controller.rb` | 12 string replacements: 6 breadcrumb `@title` values + 6 flash messages |
| `app/controllers/setup/archived_landing_pages_controller.rb` | 1 string replacement: breadcrumb `@title` |

**Views (12 files):**
| File | Changes |
|------|---------|
| `app/views/setup/_sidebar.html.erb` | 1 link text |
| `app/views_tailwind/setup/_sidebar.html.erb` | 1 link text |
| `app/views/setup/landing_pages/index.html.erb` | 9 strings (heading, buttons, placeholder, aria-label, pagination, empty state) |
| `app/views/setup/landing_pages/new.html.erb` | 1 heading |
| `app/views/setup/landing_pages/edit.html.erb` | 2 strings (heading, archived banner) |
| `app/views/setup/landing_pages/show.html.erb` | 3 strings (confirm dialogs, archived banner) |
| `app/views/setup/landing_pages/_form.html.erb` | 1 placeholder |
| `app/views/setup/landing_pages/_section_fields.html.erb` | 1 help text |
| `app/views/setup/landing_pages/_section_template.html.erb` | 1 help text |
| `app/views/setup/assigned_landing_pages/_landing_page.html.erb` | 7 strings (heading, labels, confirms, prompt, link) |
| `app/views/setup/landing_page_assignments/create.html.erb` | 1 success message |
| `app/views/setup/landing_page_assignments/_confirm_content.html.erb` | 2 warning/confirm texts |
| `app/views/setup/archived_landing_pages/index.html.erb` | 6 strings (heading, back link, pagination, empty states) |
| `app/views/setup/structures/right_pane.html.erb` | 1 action link text |
| `app/views/admin/accounts/edit.html.erb` | 1 feature flag label |

**JavaScript (1 file):**
| File | Changes |
|------|---------|
| `app/javascript/controllers/bulk_assign_modal_controller.js` | 1 flash message string |

**Tests (~4 spec files):**
| File | Changes |
|------|---------|
| `spec/requests/setup/landing_pages_controller_spec.rb` | Update string expectations for flash messages and headings |
| `spec/requests/setup/archived_landing_pages_controller_spec.rb` | Update string expectations |
| `spec/requests/setup/landing_page_assignments_controller_spec.rb` | Update string expectations |
| `spec/features/setup/landing_pages_spec.rb` | Update string expectations for UI text |

### Files NOT Modified

- All model files (`landing_page.rb`, etc.)
- All routes (`config/routes.rb`)
- All schema/migrations (`db/schema.rb`)
- All factories (`spec/factories/`)
- All helpers (`app/helpers/landing_pages_helper.rb`)
- All services (`app/services/landing_pages/`)
- All public-facing views (`app/views_tailwind/go/landing_pages/`)
- All blueprints/serializers (none exist)

### Verification Step

After all replacements, run:
```bash
grep -ri "landing page" app/views/ app/views_tailwind/setup/ app/controllers/setup/ app/javascript/controllers/bulk_assign_modal_controller.js app/views/admin/accounts/edit.html.erb
```

Expected result: zero matches. Any remaining match indicates a missed occurrence.

Also run the full landing pages test suite to confirm all assertions pass with the new strings.

---

## 7. Open Questions for Human Review

| # | Question | Options | Recommendation |
|---|----------|---------|---------------|
| 1 | Has the rename decision been finalized? (PRD blocking question #1, PM-226) | A: Yes, proceed / B: No, defer project | This must be resolved before implementation begins. The PRD explicitly marks it as blocking. |

No architectural questions — the implementation approach is straightforward.

---

## 8. Alternatives Considered

### Alternative: I18n Locale Files

**Description:** Instead of hardcoding "Public Pages" in templates, introduce Rails I18n with `t('landing_pages.sidebar_label')` keys and a `config/locales/en.yml` file.

**Pros:**
- Makes future renames trivial (change one YAML file)
- Aligns with Rails conventions for string management

**Cons:**
- No other admin UI in OrangeQC uses I18n — this would be an isolated pattern
- Adds indirection for ~51 strings that are unlikely to change again
- Increases scope beyond the PRD's "cosmetic rename" intent
- The follow-up project (`public-pages-codebase-rename`) will rename code-level identifiers, at which point file paths and template names change too — making I18n keys unstable

**Why rejected:** Inconsistent with existing patterns and unnecessarily complex for a one-time rename. If I18n is desired, it should be a separate initiative applied across the entire admin UI.

### Alternative: Include Code-Level Renames Now

**Description:** Rename models, controllers, routes, and database tables alongside the user-facing strings in a single project.

**Pros:**
- Avoids two separate projects
- Eliminates the cognitive dissonance of code saying `landing_page` while UI says "Public Page"

**Cons:**
- Significantly larger scope (database migrations, route changes, controller renames, test rewrites)
- Risk of breaking bookmarked URLs
- Requires more careful deployment coordination
- PRD explicitly scopes this out and references a follow-up project

**Why rejected:** The PRD is clear that code-level renames are a separate follow-up project. The user-facing rename should ship independently to unblock the beta rollout.

---

## 9. Summary

### Files to Create

None. No new files are needed.

### Files to Modify

| Category | Count | Description |
|----------|-------|-------------|
| Controllers | 2 | Breadcrumb `@title` values and flash messages |
| Views (ERB) | ~13 | Headings, buttons, placeholders, confirm dialogs, empty states, labels |
| JavaScript | 1 | Flash message string in bulk assign modal |
| Tests | ~4 | Update string expectations to match new user-facing text |
| **Total** | **~20** | **~51 string occurrences + test updates** |

---

## Approval Checklist

> **This architecture proposal requires human review and approval before the gameplan is generated.**

### Reviewer: Dave
### Date: February 6, 2026
### Status: Approved

#### Must Verify
- [x] Data model is architecturally sound (no changes proposed — confirm this is correct)
- [x] API design is consistent with existing patterns (no API changes — confirm this is correct)
- [x] Backwards compatibility is handled correctly (no breaking changes for any platform)
- [x] Security scoping is correct (no new data access paths)
- [x] Migration strategy is safe (no migrations)

#### Should Check
- [x] The string inventory in the discovery report is complete (no missed occurrences)
- [x] Export impact is addressed (no exports affected)
- [x] Open questions are answerable (blocking question #1 re: PM-226)
- [x] The direct string replacement approach (vs I18n) is acceptable
- [x] No conflicts with in-progress work or upcoming changes

#### Notes
Approved. Rename decision is confirmed — proceed with implementation.
