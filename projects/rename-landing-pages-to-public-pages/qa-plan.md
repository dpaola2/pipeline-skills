# QA Plan — Rename "Landing Pages" to "Public Pages"

> **Generated by:** Pipeline Stage 7 (QA Plan)
> **Date:** February 6, 2026
> **Branch:** `pipeline/rename-landing-pages-to-public-pages`
> **PR:** TBD
> **Gameplan:** `projects/rename-landing-pages-to-public-pages/gameplan.md`
> **Progress:** `projects/rename-landing-pages-to-public-pages/progress.md`

---

## 1. Feature Summary

All user-facing references to "Landing Page(s)" in the web admin UI have been replaced with "Public Page(s)". This is a purely cosmetic rename — no database tables, model classes, routes, or feature flag columns were changed. The rename covers sidebar navigation, page headings, buttons, flash messages, confirmation dialogs, empty states, search placeholders, pagination labels, area assignment UI, and the admin settings feature flag checkbox.

### Milestones Implemented

| Milestone | Description | Commit |
|-----------|-------------|--------|
| M0 | Discovery & Alignment (Stages 1-3) | — |
| M1 | Rename all user-facing strings across ~20 files (~51 occurrences) | `2ba20271d` |
| M2 | QA seed rake task for manual verification | `2bcee69a0` |

---

## 2. Automated Test Coverage

| Metric | Value |
|--------|-------|
| **Total tests (existing + new)** | 172 |
| **Passing** | 162 |
| **Failing (spec gaps)** | 10 |
| **Test files** | 5 |

### Test Types

| Type | File | Count | Covers |
|------|------|-------|--------|
| Request specs (existing) | `spec/requests/setup/landing_pages_controller_spec.rb` | 81 | All CRUD, archive/restore/duplicate, flash messages, authorization, feature flag gating |
| Feature specs (existing) | `spec/features/setup/landing_pages_spec.rb` | 51 | End-to-end UI flows: sidebar, headings, buttons, forms, search, archived pages |
| Request specs (new, rename) | `spec/requests/setup/landing_pages_public_page_rename_spec.rb` | 28 | String assertions for "Public Page" in all response bodies, flash messages, admin settings, right pane, bulk assign |
| Feature specs (new, rename) | `spec/features/setup/landing_pages_public_page_rename_spec.rb` | 12 | UI-visible strings: sidebar link, headings, buttons, empty states, search placeholder |

### What Automated Tests Verify
- All flash messages say "Public page was created/updated/archived/restored/duplicated successfully."
- Page headings on index, new, edit, show, and archived index pages
- Sidebar navigation link text (Tailwind)
- "New Public Page" button text and title attribute
- Empty state text on index and archived index pages
- Search placeholder "Search public pages..."
- Form placeholder "Public page title"
- Archived page back-link "Back to Public Pages"
- Pagination labels ("public page" / "archived public page")
- Area right pane labels and confirmation prompts (partial — see spec gaps)
- Verification grep confirms zero remaining "landing page" in user-facing files

### Spec Gaps (10 tests failing — not implementation issues)
These automated tests fail due to test authoring issues, not missing implementation:

| Gap | Tests | Root Cause |
|-----|-------|-----------|
| Structures right pane | 8 | Tests hit `show` action instead of `right_pane` AJAX endpoint |
| Admin settings | 1 | Uses non-existent `:super_admin` factory trait |
| Duplicate failure flash | 1 | Mock produces `PG::NotNullViolation` instead of `ActiveRecord::RecordInvalid` |

**These gaps require manual QA verification** (covered in Section 4 below).

---

## 3. Test Data Setup

### Rake Task

```bash
cd ~/projects/orangeqc/orangeqc
git checkout pipeline/rename-landing-pages-to-public-pages
bundle exec rake pipeline:seed_rename_landing_pages_to_public_pages
```

The task is idempotent — running it again will print the summary without duplicating data.

### Scenarios Seeded

| Scenario | Account/Credentials | Data Created | Purpose |
|----------|-------------------|--------------|---------|
| Full QA account | `publicpages_qa` / `hacktheplanet` | 3 active public pages, 2 archived, 2 sites, 5 areas, 2 checklists | Test all rename scenarios |
| Assigned areas | Same account | Lobby + Conference Room A → Cleaning Services Portal, Reception → Safety Inspections Portal | Test area assignment UI labels |
| Unassigned areas | Same account | Break Room, Open Floor (no landing page assigned) | Test "no public page assigned" empty state |
| Multi-section page | Same account | Cleaning Services Portal has 2 checklist form assignments | Test section editor help text |
| No-section page | Same account | Empty Portal (No Sections) | Test empty section state |
| Archived pages | Same account | Old Maintenance Portal, Deprecated Cleaning Page | Test archived index, back-link, archived banner |

### Post-Seed Verification

The rake task prints a full summary with URLs. After running:
- [ ] Navigate to `http://publicpages-qa.lvh.me:3000` and verify you can log in
- [ ] Navigate to `/setup/landing_pages` and verify the index loads with 3 active public pages

---

## 4. Manual Testing Checklist

> Organized by feature area. Each item covers something NOT fully verified by automated tests.
> All tests use the QA account: log in at `http://publicpages-qa.lvh.me:3000` as `publicpages_qa` / `hacktheplanet`.

### 4.1 Sidebar Navigation

#### QA-001: Tailwind sidebar shows "Public Pages"
**Criteria:** NAV-001
**Steps:**
1. Log in to the QA account
2. Navigate to `/setup/landing_pages`
3. Look at the left sidebar navigation

**Expected:** The sidebar link reads "Public Pages" (not "Landing Pages"). The icon should be the same as before.

---

#### QA-002: Bootstrap sidebar shows "Public Pages"
**Criteria:** NAV-002
**Steps:**
1. Navigate to `/setup/structures` (this page uses the Bootstrap sidebar)
2. Look at the left sidebar navigation

**Expected:** The sidebar link reads "Public Pages" (not "Landing Pages"). This verifies the Bootstrap sidebar variant matches the Tailwind one.

---

### 4.2 Page Headings

#### QA-003: Index page heading
**Criteria:** HDG-001
**Steps:**
1. Navigate to `/setup/landing_pages`

**Expected:** Page heading reads "Public Pages".

---

#### QA-004: New page heading
**Criteria:** HDG-002
**Steps:**
1. Navigate to `/setup/landing_pages/new`

**Expected:** Page heading reads "New Public Page".

---

#### QA-005: Edit page heading
**Criteria:** HDG-003
**Steps:**
1. Navigate to `/setup/landing_pages`
2. Click the "Edit" action on "Cleaning Services Portal"

**Expected:** Page heading reads "Edit Public Page".

---

#### QA-006: Show page has no "Landing Page" references
**Criteria:** HDG-005
**Steps:**
1. Navigate to `/setup/landing_pages`
2. Click on "Cleaning Services Portal" to view it

**Expected:** No text on the page says "Landing Page" anywhere — check the archived banner (should not appear for active pages), confirm dialogs in the action buttons, and page header area.

---

#### QA-007: Archived index heading
**Criteria:** HDG-004
**Steps:**
1. Navigate to `/setup/archived_landing_pages`

**Expected:** Page heading reads "Archived Public Pages".

---

#### QA-008: Archived page back-link
**Criteria:** NAV-003
**Steps:**
1. Navigate to `/setup/archived_landing_pages`
2. Look for the back navigation link

**Expected:** Link text reads "Back to Public Pages" and navigates to `/setup/landing_pages`.

---

### 4.3 Buttons & Actions

#### QA-009: "New Public Page" button on index
**Criteria:** BTN-001
**Steps:**
1. Navigate to `/setup/landing_pages`
2. Look at the primary action button

**Expected:** Button text reads "New Public Page". Hover tooltip (title attribute) also reads "New Public Page".

---

#### QA-010: Duplicate action in structures right pane
**Criteria:** BTN-002
**Steps:**
1. Navigate to `/setup/structures`
2. Expand "Main Campus" site
3. Click on "Lobby" area to load its right pane
4. Look for the duplicate action in the right pane

**Expected:** Action text reads "Duplicate Public Page" (not "Duplicate Landing Page").

> **Note:** This covers the spec gap — 8 automated tests couldn't verify this because they hit the wrong endpoint.

---

#### QA-011: Archive confirmation dialog
**Criteria:** BTN-003, MSG-002
**Steps:**
1. Navigate to `/setup/landing_pages`
2. Click on "Cleaning Services Portal"
3. Click the "Archive" button

**Expected:** The confirmation dialog says something like "This public page is assigned to 2 areas. Are you sure you want to archive this public page?" — all references should say "public page" not "landing page". (Cancel the dialog — do not actually archive it.)

---

#### QA-012: Archive confirmation for unassigned page
**Criteria:** BTN-003, MSG-002
**Steps:**
1. Navigate to `/setup/landing_pages`
2. Click on "Empty Portal (No Sections)"
3. Click the "Archive" button

**Expected:** Confirmation says "Are you sure you want to archive this public page?" (simpler variant without area count).

---

### 4.4 Flash Messages

#### QA-013: Create flash message
**Criteria:** MSG-001
**Steps:**
1. Navigate to `/setup/landing_pages/new`
2. Enter title "Test Create Flash"
3. Click Save

**Expected:** Flash message reads "Public page was created successfully."

---

#### QA-014: Update flash message
**Criteria:** MSG-001
**Steps:**
1. Edit the page you just created
2. Change the title to "Test Update Flash"
3. Click Save

**Expected:** Flash message reads "Public page was updated successfully."

---

#### QA-015: Archive flash message
**Criteria:** MSG-001
**Steps:**
1. Click on the page you just updated
2. Click Archive and confirm

**Expected:** Flash message reads "Public page was archived successfully."

---

#### QA-016: Restore flash message
**Criteria:** MSG-001, BTN-004
**Steps:**
1. Navigate to `/setup/archived_landing_pages`
2. Find the page you just archived ("Test Update Flash")
3. Click Restore

**Expected:** Flash message reads "Public page was restored successfully."

---

#### QA-017: Duplicate flash message
**Criteria:** MSG-001
**Steps:**
1. Navigate to `/setup/landing_pages`
2. Click on "Cleaning Services Portal"
3. Click "Duplicate"

**Expected:** Flash message reads "Public page was duplicated successfully."

---

### 4.5 Area Assignment UI

#### QA-018: Area right pane — assigned page labels
**Criteria:** BTN-005
**Steps:**
1. Navigate to `/setup/structures`
2. Expand "Main Campus"
3. Click on "Lobby" (which has an assigned public page)
4. Look at the right pane

**Expected:** The right pane shows:
- Heading: "Public Page" (not "Landing Page")
- Label: "Public page assigned to this area:" followed by the page title
- "Remove" confirm should reference "public page"

> **Note:** This covers the spec gap from the structures right pane tests.

---

#### QA-019: Area right pane — no page assigned
**Criteria:** BTN-005
**Steps:**
1. Navigate to `/setup/structures`
2. Expand "Main Campus"
3. Click on "Break Room" (no landing page assigned)

**Expected:** The right pane shows:
- "No public page assigned" (not "No landing page assigned")
- "Select a public page..." dropdown prompt
- "Create Public Page" link

---

#### QA-020: Bulk assign modal
**Criteria:** BTN-006
**Steps:**
1. Navigate to `/setup/landing_pages`
2. Click on "Safety Inspections Portal"
3. Click the "Assign to Areas" button (or however the bulk assign is triggered)
4. Select some areas and submit

**Expected:** The modal heading and labels reference "Public Page". The success flash message reads "Public page assigned to X areas successfully."

---

#### QA-021: Bulk assign replacement confirmation
**Criteria:** MSG-002
**Steps:**
1. Trigger a bulk assign that would replace an existing assignment (e.g., assign "Safety Inspections Portal" to "Lobby", which already has "Cleaning Services Portal")

**Expected:** Confirmation text references "a different public page assigned" and "existing public page assignment" — not "landing page".

---

### 4.6 Form & Section Editor

#### QA-022: Form title placeholder
**Criteria:** Gameplan additional criteria
**Steps:**
1. Navigate to `/setup/landing_pages/new`
2. Look at the title input field placeholder

**Expected:** Placeholder reads "Public page title" (not "Landing page title").

---

#### QA-023: Section help text
**Criteria:** Gameplan additional criteria (covered by verification grep only)
**Steps:**
1. Navigate to `/setup/landing_pages/new`
2. Add a section to the form
3. Look at the section's help text about form selection

**Expected:** Help text reads "...when you save the public page." (not "...save the landing page.").

> **Note:** This covers a grep-only criterion — the section editor is JS-managed and wasn't testable via request specs.

---

### 4.7 Archived Pages

#### QA-024: Archived page banner on show/edit
**Criteria:** HDG-005
**Steps:**
1. Navigate to `/setup/archived_landing_pages`
2. Click on "Old Maintenance Portal" to view it
3. Also navigate to its edit page

**Expected:** Both show and edit pages display a banner reading "This public page is archived." (not "This landing page is archived.").

---

#### QA-025: Archived index empty state
**Criteria:** Gameplan additional criteria
**Steps:**
1. Restore all archived pages so the archived index is empty
2. Navigate to `/setup/archived_landing_pages`

**Expected:** Empty state heading reads "No archived public pages" and description mentions "Public pages you archive will appear here."

---

#### QA-026: Archived search empty state
**Criteria:** Verification grep criterion
**Steps:**
1. Navigate to `/setup/archived_landing_pages` (with archived pages present)
2. Search for a term that matches nothing (e.g., "zzzzz")

**Expected:** Empty state reads "No archived public pages match your search" (not "No archived landing pages match").

---

### 4.8 Admin Settings

#### QA-027: Feature flag checkbox label
**Criteria:** FLG-001
**Steps:**
1. Log in as a superadmin (use the main dev account, not the QA account)
2. Navigate to Admin > Accounts
3. Edit the QA account (or any account)
4. Go to the "Features" tab
5. Look at the landing pages feature checkbox

**Expected:** Checkbox label reads "Public Pages" (not "Landing Pages").

> **Note:** This covers the spec gap — the automated test used a non-existent `:super_admin` factory trait.

---

### 4.9 Index Empty State

#### QA-028: Index page with no public pages
**Criteria:** Gameplan additional criteria
**Steps:**
1. Create a new test account with `landing_pages_enabled: true` but no landing pages (or archive all pages in the QA account)
2. Navigate to `/setup/landing_pages`

**Expected:** Empty state reads "No public pages" with description "Public pages display..." and CTA link "Create your first public page".

---

## 5. Edge Cases & Boundary Conditions

| # | Scenario | How to Test | Expected Result | Criteria |
|---|----------|-------------|-----------------|----------|
| 1 | URL paths still say `/landing_pages` | Check browser address bar on all pages | URLs remain `/setup/landing_pages/*` — this is expected and intentional | PRD Edge Case |
| 2 | Browser tab title | Check `<title>` tag on index, new, edit pages | Should show "Public Pages" in breadcrumb (tab title is set via `@title` which was updated) | HDG-001–004 |
| 3 | Existing bookmarked URLs | Navigate directly to `/setup/landing_pages/1/edit` | Page loads normally with "Edit Public Page" heading | Backwards compat |
| 4 | Feature disabled account | Disable `landing_pages_enabled` on QA account, try accessing `/setup/landing_pages` | Returns 404 — behavior unchanged from before rename | Security |
| 5 | Non-admin user | Log in as a non-admin user (create one if needed), try accessing `/setup/landing_pages` | Returns 404 or redirects — behavior unchanged | Security |

---

## 6. Known Limitations

Items explicitly deferred or not implemented in this version:

| Item | Status | Notes |
|------|--------|-------|
| Code-level renames (models, controllers, routes, tables) | Out of scope | Deferred to follow-up project `public-pages-codebase-rename` per PRD |
| URL path rename (`/setup/landing_pages` → `/setup/public_pages`) | Out of scope | Part of code-level rename project |
| Stimulus controller identifier rename (`landing-page-edit`) | Out of scope | Internal identifier, not user-visible |
| Feature flag column rename (`landing_pages_enabled`) | Out of scope | Part of code-level rename project |
| I18n locale files | Not implemented | Direct string replacement chosen (consistent with codebase patterns) |
| Help documentation (DOC-001) | Not in this PR | PM-221 help doc is a separate deliverable managed by product |
| Public-facing QR code page | No change needed | The visitor view doesn't display the feature name anywhere |

---

## 7. Regression Concerns

Areas where existing functionality could be affected by this change:

| Area | Risk | What to Check |
|------|------|---------------|
| Landing pages CRUD operations | Low | Create, edit, archive, restore, duplicate all still work (flash messages changed, behavior unchanged). Covered by 81 passing request specs. |
| Archived landing pages index | Low | Index loads, search works, pagination works. Covered by passing request specs. |
| Area assignment (right pane) | Low | Assigning/removing landing pages from areas still works. Only label strings changed. |
| Bulk assign modal | Low | Modal opens, checkboxes work, form submits, success message displays. Only the flash message string changed in JS. |
| Bootstrap sidebar (non-Tailwind pages) | Low | Sidebar link still navigates to `/setup/landing_pages`. Only text changed. |
| Admin account edit page | Low | Feature flags tab still renders correctly. Only one label changed. |
| Public-facing landing page (visitor view) | None | No changes to `app/views_tailwind/go/landing_pages/` — visitor-facing pages are untouched |
| Mobile apps (iOS/Android) | None | No API changes, no mobile code changes |
| Exports/Reports | None | No exports reference the feature name |

---

## 8. Rollback Plan

| Step | Action | Notes |
|------|--------|-------|
| Feature flag | Toggle `landing_pages_enabled` to `false` on affected accounts | Hides the entire feature (not just the rename). Only use as emergency measure. |
| Code revert | Revert the M1 commit (`2ba20271d`) from the branch | Restores all "Landing Page" strings. No data cleanup needed — this is a string-only change. |
| Migration | N/A | No migrations to revert |
| Data cleanup | N/A | No data was created or modified by the rename. The QA seed rake task creates test data in dev/staging only. |

The safest rollback is a code revert since this is purely string changes. No data implications.

---

## QA Sign-Off

### Tester: ___________
### Date: ___________
### Status: Pending

- [ ] All 28 manual test scenarios verified
- [ ] Edge cases tested (5 scenarios)
- [ ] Regression areas checked
- [ ] No blocking issues found

#### Issues Found
| # | Severity | Description | Status |
|---|----------|-------------|--------|
| | | | |

#### Notes
[Any observations, feedback, or suggestions from QA]
