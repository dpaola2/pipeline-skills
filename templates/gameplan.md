# [Feature Name] - Engineering Gameplan

> **Generated by:** Pipeline Stage 3 (Gameplan)
> **Date:** [Date]
> **PRD:** [Link]
> **Discovery Report:** [Link]
> **Architecture Proposal:** [Link]
> **Linear Project:** [Link]

---

## 1. Project Overview

### Goals
- [What does success look like?]
- [What are we shipping?]

### Scope Summary

| Ticket | Description | Platform |
|--------|-------------|----------|
| [LIN-XXX] | [Brief description] | Web / iOS / Android |

### Out of Scope
- [Explicitly what we're NOT doing]

### Constraints & Conventions
- AGENTS.md: [Link to repo AGENTS.md]
- [Any project-specific constraints]

---

## 2. Open Questions & Decisions

> Resolved during Stages 1-2 (Discovery + Architecture)

| Question | Status | Decision |
|----------|--------|----------|
| [Question from discovery] | Resolved | [Decision] |
| [Question from architecture] | Resolved | [Decision] |
| [Remaining question] | Open | [Needs human input] |

---

## 3. Functional Milestones

> Organized by FEATURE AREA, not by platform.

### M0: Discovery & Alignment (Complete)
- [x] PRD parsed and understood (Stage 1)
- [x] Current state documented across platforms (Stage 1)
- [x] Data model proposed and aligned (Stage 2)
- [x] API endpoints designed with example payloads (Stage 2)
- [x] Open questions resolved (Stages 1-2)

### M1: [Feature Area 1 - e.g., Data Model & Core API]
**What:** [Brief description]
**Linear:** [LIN-XXX]

**Acceptance Criteria:**
- [ ] [XX-001]: [Specific, testable criterion]
- [ ] [XX-002]: [Specific, testable criterion]
- [ ] [XX-003]: [Specific, testable criterion]

**Web/API:**
- [ ] Migration: [create/alter table]
- [ ] Model: [Model with validations, associations, scopes]
- [ ] Controller: [Endpoints]
- [ ] Serializer: [Blueprint]
- [ ] Tests: [Model specs, request specs]

**iOS:**
- [ ] [Specific task or N/A]

**Android:**
- [ ] [Specific task or N/A]

**Dependencies:** None (first milestone)

---

### M2: [Feature Area 2 - e.g., Admin UI]
**What:** [Brief description]
**Linear:** [LIN-XXX]

**Acceptance Criteria:**
- [ ] [XX-010]: [Criterion]
- [ ] [XX-011]: [Criterion]

**Web/API:**
- [ ] [Specific tasks]

**iOS:**
- [ ] [Specific tasks]

**Android:**
- [ ] [Specific tasks]

**Dependencies:** M1 (needs data model)

---

### M3: [Feature Area 3 - e.g., Mobile UI]
**What:** [Brief description]
**Linear:** [LIN-XXX]

**Acceptance Criteria:**
- [ ] [XX-020]: [Criterion]

**Web/API:**
- [ ] [Specific tasks or N/A]

**iOS:**
- [ ] [Specific tasks]

**Android:**
- [ ] [Specific tasks]

**Dependencies:** M1 (needs API endpoints)

---

[Continue milestones as needed]

---

## 4. Non-Functional Requirements Checklist

### Data Model
- [ ] New/changed fields documented (see Architecture Proposal)
- [ ] Migrations planned (DDL, concurrent indexes, backfills)
- [ ] Indexes identified for query patterns
- [ ] Data model aligned across platforms
- [ ] Expected data volumes documented
- [ ] UUIDv7 for primary keys

### API
- [ ] New/changed endpoints documented with example payloads
- [ ] Serializers/Blueprints planned
- [ ] API versioning considered
- [ ] Pagination needed? [Yes/No]
- [ ] Human-readable formats (ISO 8601, string enums)

### Security & Access Control
- [ ] All queries scoped to account/user
- [ ] Controller authorization in place
- [ ] Feature permissions respected
- [ ] Area-based access respected (if applicable)
- [ ] API authentication required
- [ ] No new attack surfaces

### Performance
- [ ] Data volume x access frequency considered
- [ ] Query patterns identified
- [ ] Indexes sufficient
- [ ] Caching needed? [Yes/No]
- [ ] N+1 query risks identified

### Observability & Debuggability
- [ ] Logging plan (events, fields)
- [ ] Logs are human-readable
- [ ] Debug path exists without production access
- [ ] Metrics/analytics (what to track)
- [ ] Alerts needed? [Yes/No]

### Testing Plan

| Type | Coverage | Platform | Owner |
|------|----------|----------|-------|
| Model/unit specs | [What's covered] | Rails | Pipeline |
| Request/API specs | [What's covered] | Rails | Pipeline |
| System/E2E specs | [What's covered] | Rails | Pipeline |
| Unit tests | [What's covered] | iOS | Pipeline |
| Unit tests | [What's covered] | Android | Pipeline |
| Manual QA | [Key scenarios] | All | Human |

### Feature Flags & Rollout
- [ ] Feature flag: `[flag_name]`
- [ ] Default: Off
- [ ] Beta flag for select accounts
- [ ] Rollout plan: [phases]

### Mobile-Specific
- [ ] Firebase events planned
- [ ] Crash reporting considerations
- [ ] Offline behavior defined (if applicable)
- [ ] Min OS version implications

### Legacy & Migration
- [ ] Old client experience documented (compatibility matrix)
- [ ] Backward compatibility requirements met
- [ ] Data migration from old â†’ new (if applicable)

### Export/Reporting
- [ ] Export requirements addressed
- [ ] Export backwards compatibility maintained
- [ ] N/A

---

## 5. Dependencies & Risks

| Risk/Dependency | Impact | Mitigation |
|-----------------|--------|------------|
| [Risk 1] | High / Med / Low | [Mitigation strategy] |
| [Dependency 1] | [Impact] | [How we handle it] |

---

## 6. Release Plan

### Phases

| Phase | What Ships | Flag State | Audience |
|-------|-----------|------------|----------|
| Phase 1 | [Milestones M1-M2] | Beta ON for test accounts | Internal |
| Phase 2 | [All milestones] | Beta ON for select customers | Beta customers |
| Phase 3 | [GA] | Feature ON for all | All customers |

### Done Criteria
- [ ] All acceptance criteria met
- [ ] All tests passing
- [ ] Feature flag enabled for beta accounts
- [ ] Observability in place
- [ ] QA sign-off

---

## 7. Estimates

| Milestone | Rails | iOS | Android | Notes |
|-----------|-------|-----|---------|-------|
| M0: Discovery | Done | Done | Done | Pipeline Stages 1-2 |
| M1: [Name] | [X days] | [X days] | [X days] | |
| M2: [Name] | [X days] | [X days] | [X days] | |
| M3: [Name] | [X days] | [X days] | [X days] | |
| **Total** | **[X days]** | **[X days]** | **[X days]** | |

---

## Changelog

| Date | Author | Changes |
|------|--------|---------|
| [Date] | Pipeline | Initial gameplan generated |
| [Date] | [Human reviewer] | Approved with modifications: [notes] |
